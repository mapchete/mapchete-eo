process: mapchete_eo.processes.eoxcloudless_mosaic
input:
  sentinel2:
    format: Sentinel-2
    level: L2A
    time:
      start: 2023-08-10
      end: 2023-08-13
    cat_baseurl: sentinel2/full_products/catalog.json
    # DEBUG: Nice weather time frame below 
    # time:
    #  start: 2023-07-10
    #  end: 2023-07-15

    # DEBUG: Cache for local here below, switch off local catalogue baseurl
    # cache:
    #  keep: true
    #  path: sentinel2/full_products
    #  product_path_generation_method: date_year_first
    #  assets: ["red", "green", "blue", "nir"]
    #  max_disk_usage: 100.0
    #  check_cached_files_exist: true
    #  brdf:
    #    bands: ["red", "green", "blue", "nir"]
output:
  format: GTiff
  bands: 3
  path: eoxcloudless_tmp
  dtype: uint16
pyramid:
  grid: geodetic
# DEBUG: use zoom 13 with the fancy date range
# zoom_levels: 13
zoom_levels: 9
bounds: [16, 46, 16.1, 46.1]


process_parameters:
  resampling: bilinear
  target_height: 10
  read_masks: true
  mask_config:
    # !! dicts with one entry cause a bug in mapchete
    footprint: true
    buffer: 16
    cloud_probability_threshold: 20
    cloud_probability_resolution: 20
    scl_classes: ["vegetation"]
    # SCL classes and its corresponding mapchete_eo names
    # mask using one or more of the SCL classes
        # nodata = 0
        # saturated_or_defected = 1
        # dark_area_pixels = 2
        # cloud_shadows = 3
        # vegetation = 4
        # not_vegetated = 5
        # water = 6
        # unclassified = 7
        # cloud_medium_probability = 8
        # cloud_high_probability = 9
        # thin_cirrus = 10
        # snow = 11
  custom_mask_config:
    footprint: true
    l1c_cloud_type: all
    buffer: 0
    cloud_probability_threshold: 60
    cloud_probability_resolution: 60     
  # DEBUG: RGB + NIR for fun
  # assets: ["red", "green", "blue", "nir"]
  assets: ["red", "green", "blue"]
  from_brightness_extract_method: third_quartile